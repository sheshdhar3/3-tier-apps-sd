{"ast":null,"code":"import _objectSpread from\"/home/TWSThreeTierAppChallenge/Application-Code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/TWSThreeTierAppChallenge/Application-Code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/TWSThreeTierAppChallenge/Application-Code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/TWSThreeTierAppChallenge/Application-Code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/TWSThreeTierAppChallenge/Application-Code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/TWSThreeTierAppChallenge/Application-Code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/TWSThreeTierAppChallenge/Application-Code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/TWSThreeTierAppChallenge/Application-Code/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Component}from\"react\";import{addTask,getTasks,updateTask,deleteTask}from\"./services/taskServices\";var Tasks=/*#__PURE__*/function(_Component){_inherits(Tasks,_Component);var _super=_createSuper(Tasks);function Tasks(){var _this;_classCallCheck(this,Tasks);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={tasks:[],currentTask:\"\"};_this.handleChange=function(_ref){var input=_ref.currentTarget;_this.setState({currentTask:input.value});};_this.handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var originalTasks,_yield$addTask,data,tasks;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();originalTasks=_this.state.tasks;_context.prev=2;_context.next=5;return addTask({task:_this.state.currentTask});case 5:_yield$addTask=_context.sent;data=_yield$addTask.data;tasks=originalTasks;tasks.push(data);_this.setState({tasks:tasks,currentTask:\"\"});_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleUpdate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(currentTask){var originalTasks,tasks,index;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:originalTasks=_this.state.tasks;_context2.prev=1;tasks=_toConsumableArray(originalTasks);index=tasks.findIndex(function(task){return task._id===currentTask;});tasks[index]=_objectSpread({},tasks[index]);tasks[index].completed=!tasks[index].completed;_this.setState({tasks:tasks});_context2.next=9;return updateTask(currentTask,{completed:tasks[index].completed});case 9:_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);_this.setState({tasks:originalTasks});console.log(_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(currentTask){var originalTasks,tasks;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:originalTasks=_this.state.tasks;_context3.prev=1;tasks=originalTasks.filter(function(task){return task._id!==currentTask;});_this.setState({tasks:tasks});_context3.next=6;return deleteTask(currentTask);case 6:_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);_this.setState({tasks:originalTasks});console.log(_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x3){return _ref4.apply(this,arguments);};}();return _this;}_createClass(Tasks,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _yield$getTasks,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return getTasks();case 3:_yield$getTasks=_context4.sent;data=_yield$getTasks.data;this.setState({tasks:data});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 11:case\"end\":return _context4.stop();}}},_callee4,this,[[0,8]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()}]);return Tasks;}(Component);export default Tasks;","map":{"version":3,"sources":["/home/TWSThreeTierAppChallenge/Application-Code/frontend/src/Tasks.js"],"names":["Component","addTask","getTasks","updateTask","deleteTask","Tasks","state","tasks","currentTask","handleChange","input","currentTarget","setState","value","handleSubmit","e","preventDefault","originalTasks","task","data","push","console","log","handleUpdate","index","findIndex","_id","completed","handleDelete","filter"],"mappings":"42CAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,OACIC,OADJ,CAEIC,QAFJ,CAGIC,UAHJ,CAIIC,UAJJ,KAKO,yBALP,C,GAOMC,CAAAA,K,uTACFC,K,CAAQ,CAAEC,KAAK,CAAE,EAAT,CAAaC,WAAW,CAAE,EAA1B,C,OAWRC,Y,CAAe,cAA8B,IAAZC,CAAAA,KAAY,MAA3BC,aAA2B,CACzC,MAAKC,QAAL,CAAc,CAAEJ,WAAW,CAAEE,KAAK,CAACG,KAArB,CAAd,EACH,C,OAEDC,Y,2FAAe,iBAAOC,CAAP,8JACXA,CAAC,CAACC,cAAF,GACMC,aAFK,CAEW,MAAKX,KAAL,CAAWC,KAFtB,uCAIgBN,CAAAA,OAAO,CAAC,CAAEiB,IAAI,CAAE,MAAKZ,KAAL,CAAWE,WAAnB,CAAD,CAJvB,qCAICW,IAJD,gBAICA,IAJD,CAKDZ,KALC,CAKOU,aALP,CAMPV,KAAK,CAACa,IAAN,CAAWD,IAAX,EACA,MAAKP,QAAL,CAAc,CAAEL,KAAK,CAALA,KAAF,CAASC,WAAW,CAAE,EAAtB,CAAd,EAPO,iFASPa,OAAO,CAACC,GAAR,cATO,qE,sEAafC,Y,2FAAe,kBAAOf,WAAP,oJACLS,aADK,CACW,MAAKX,KAAL,CAAWC,KADtB,kBAGDA,KAHC,oBAGWU,aAHX,EAIDO,KAJC,CAIOjB,KAAK,CAACkB,SAAN,CAAgB,SAACP,IAAD,QAAUA,CAAAA,IAAI,CAACQ,GAAL,GAAalB,WAAvB,EAAhB,CAJP,CAKPD,KAAK,CAACiB,KAAD,CAAL,kBAAoBjB,KAAK,CAACiB,KAAD,CAAzB,EACAjB,KAAK,CAACiB,KAAD,CAAL,CAAaG,SAAb,CAAyB,CAACpB,KAAK,CAACiB,KAAD,CAAL,CAAaG,SAAvC,CACA,MAAKf,QAAL,CAAc,CAAEL,KAAK,CAALA,KAAF,CAAd,EAPO,uBAQDJ,CAAAA,UAAU,CAACK,WAAD,CAAc,CAC1BmB,SAAS,CAAEpB,KAAK,CAACiB,KAAD,CAAL,CAAaG,SADE,CAAd,CART,6FAYP,MAAKf,QAAL,CAAc,CAAEL,KAAK,CAAEU,aAAT,CAAd,EACAI,OAAO,CAACC,GAAR,eAbO,uE,uEAiBfM,Y,2FAAe,kBAAOpB,WAAP,8IACLS,aADK,CACW,MAAKX,KAAL,CAAWC,KADtB,kBAGDA,KAHC,CAGOU,aAAa,CAACY,MAAd,CACV,SAACX,IAAD,QAAUA,CAAAA,IAAI,CAACQ,GAAL,GAAalB,WAAvB,EADU,CAHP,CAMP,MAAKI,QAAL,CAAc,CAAEL,KAAK,CAALA,KAAF,CAAd,EANO,uBAODH,CAAAA,UAAU,CAACI,WAAD,CAPT,2FASP,MAAKI,QAAL,CAAc,CAAEL,KAAK,CAAEU,aAAT,CAAd,EACAI,OAAO,CAACC,GAAR,eAVO,sE,4NA3Cf,yMAE+BpB,CAAAA,QAAQ,EAFvC,uCAEgBiB,IAFhB,iBAEgBA,IAFhB,CAGQ,KAAKP,QAAL,CAAc,CAAEL,KAAK,CAAEY,IAAT,CAAd,EAHR,mFAKQE,OAAO,CAACC,GAAR,eALR,sE,gIAHgBtB,S,EA6DpB,cAAeK,CAAAA,KAAf","sourcesContent":["import { Component } from \"react\";\nimport {\n    addTask,\n    getTasks,\n    updateTask,\n    deleteTask,\n} from \"./services/taskServices\";\n\nclass Tasks extends Component {\n    state = { tasks: [], currentTask: \"\" };\n\n    async componentDidMount() {\n        try {\n            const { data } = await getTasks();\n            this.setState({ tasks: data });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    handleChange = ({ currentTarget: input }) => {\n        this.setState({ currentTask: input.value });\n    };\n\n    handleSubmit = async (e) => {\n        e.preventDefault();\n        const originalTasks = this.state.tasks;\n        try {\n            const { data } = await addTask({ task: this.state.currentTask });\n            const tasks = originalTasks;\n            tasks.push(data);\n            this.setState({ tasks, currentTask: \"\" });\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    handleUpdate = async (currentTask) => {\n        const originalTasks = this.state.tasks;\n        try {\n            const tasks = [...originalTasks];\n            const index = tasks.findIndex((task) => task._id === currentTask);\n            tasks[index] = { ...tasks[index] };\n            tasks[index].completed = !tasks[index].completed;\n            this.setState({ tasks });\n            await updateTask(currentTask, {\n                completed: tasks[index].completed,\n            });\n        } catch (error) {\n            this.setState({ tasks: originalTasks });\n            console.log(error);\n        }\n    };\n\n    handleDelete = async (currentTask) => {\n        const originalTasks = this.state.tasks;\n        try {\n            const tasks = originalTasks.filter(\n                (task) => task._id !== currentTask\n            );\n            this.setState({ tasks });\n            await deleteTask(currentTask);\n        } catch (error) {\n            this.setState({ tasks: originalTasks });\n            console.log(error);\n        }\n    };\n}\n\nexport default Tasks;\n"]},"metadata":{},"sourceType":"module"}